import{j as e,b as a}from"./index-SyEhgdtT.js";import{I as n}from"./inline-code-DwHVTRgA.js";import{C as o}from"./code-block-bL3gIvBm.js";import{B as i,a as t}from"./blog-content-DYQd5OcZ.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new s.Error().stack;r&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[r]="c641513e-aca6-4944-a785-41067dc31daf",s._sentryDebugIdIdentifier="sentry-dbid-c641513e-aca6-4944-a785-41067dc31daf")}catch{}function m(){return e.jsxs(e.Fragment,{children:[e.jsx("title",{children:"Canonical URL sharing on mobile browsers and a workaround for static sites"}),e.jsx("meta",{name:"description",content:"Why mobile browsers share canonical URLs, the pros and cons, and a workaround for static sites to preserve user context when sharing links."}),e.jsx("meta",{property:"og:title",content:"Canonical URL sharing on mobile browsers and a workaround for static sites"}),e.jsx("meta",{property:"og:description",content:"Why mobile browsers share canonical URLs, the pros and cons, and a workaround for static sites to preserve user context when sharing links."}),e.jsx("link",{rel:"canonical",href:"https://yudavidcao.github.io/blog/canonical-url-sharing-on-mobile-browsers-and-a-workaround-for-static-sites"}),e.jsxs("div",{className:"w-3/5 flex gap-4 text-xl rounded-lg py-4 flex-col font-sans dark:bg-dark-primary dark:text-dark-tx-primary",children:[e.jsx(i,{title:"Canonical URL sharing on mobile browsers and a workaround for static sites",date:"June 6, 2025",heroImgSrc:a,heroImgAlt:"Canonical URL sharing on mobile browsers and a workaround for static sites Hero"}),e.jsxs("article",{className:"prose prose-lg max-w-none font-sans dark:prose-invert",children:[e.jsx("p",{className:"mb-4",children:"On mobile browsers like Safari and Chrome, sharing or bookmarking a page often uses the canonical URL instead of the current URL, which can strip query parameters and fragments that are important for users. This behavior, originally intended to help search engines, can cause confusion and loss of context for users sharing filtered or specific views of a page."}),e.jsx("p",{className:"mb-4",children:"The article explores why browsers do this, the pros and cons, and offers a workaround for static sites: dynamically updating the canonical link with JavaScript to reflect the current URL, ensuring shared links preserve user context. The post also summarizes browser behaviors and suggests that browsers could offer user-facing options for sharing canonical vs. current URLs."}),e.jsx("h2",{className:"font-serif text-3xl font-bold mt-10 mb-4 tracking-tight",children:"Why do browsers share canonical URLs?"}),e.jsxs("p",{className:"mb-4",children:["Canonical URLs were designed for search engines to identify the preferred version of a page, especially when there are duplicates with different query parameters. Around 2017, browsers started using canonical URLs for sharing/bookmarking, mainly to help users get the original article instead of AMP or cached versions. However, this general mechanism now affects all sites using"," ",e.jsx(n,{children:'<link rel="canonical" />'}),"."]}),e.jsx("h2",{className:"font-serif text-3xl font-bold mt-10 mb-4 tracking-tight",children:"Pros and cons for users"}),e.jsxs("p",{className:"mb-4",children:[e.jsx("strong",{children:"Pros:"})," Strips tracking and unnecessary parameters, sometimes improving privacy. ",e.jsx("br",{}),e.jsx("strong",{children:"Cons:"})," Users may lose important context (filters, fragments, etc.) when sharing/bookmarking, leading to confusion or loss of intent."]}),e.jsx("h2",{className:"font-serif text-3xl font-bold mt-10 mb-4 tracking-tight",children:"Browser behavior summary"}),e.jsxs("p",{className:"mb-4",children:["- Android: Chrome shares canonical (keeps fragment), Firefox/Samsung share original.",e.jsx("br",{}),"- iOS: Safari/Chrome/Edge share canonical (lose fragment), Firefox shares original.",e.jsx("br",{}),"- Desktop: Most share original URL."]}),e.jsx("h2",{className:"font-serif text-3xl font-bold mt-10 mb-4 tracking-tight",children:"Workaround for static sites"}),e.jsx("p",{className:"mb-4",children:"For static sites, you can use JavaScript to update the canonical link dynamically as the user navigates or changes filters. This ensures the canonical URL matches the current view, so sharing/bookmarking preserves the full context."}),e.jsx(o,{language:"javascript",code:`const canonical = document.querySelector('link[rel="canonical"]');
if (canonical) {
  canonical.href = window.location.href;
}`}),e.jsx("p",{className:"mb-4",children:"This approach is not perfect, but it helps mitigate the issue for static sites."}),e.jsx("h2",{className:"font-serif text-3xl font-bold mt-10 mb-4 tracking-tight",children:"Conclusion"}),e.jsx("p",{className:"mb-4",children:"Mobile browsers' use of canonical URLs for sharing/bookmarking can be problematic for users. Developers can work around this on static sites, but ideally, browsers should offer users a choice between sharing the canonical or current URL."}),e.jsx(t,{url:"https://medium.com/@yu.cao20041208/canonical-url-sharing-on-mobile-browsers-and-a-workaround-for-static-sites-bab360d29835"})]})]})]})}export{m as CanonicalUrlSharingOnMobileBrowsersAndAWorkaroundForStaticSites};
//# sourceMappingURL=canonical-url-sharing-on-mobile-browsers-and-a-workaround-for-static-sites-Ctok0Z4O.js.map
